/*
CSS Selector Generator, v1.2.0
by Riki Fridrich <riki@fczbkk.com> (http://fczbkk.com)
https://github.com/fczbkk/css-selector-generator/
*/(function(){var a,b;a=function(){function a(a){null==a&&(a={}),this.options={},this.setOptions(this.default_options),this.setOptions(a)}return a.prototype.default_options={selectors:["id","class","tag","nthchild"],prefix_tag:!1,attribute_blacklist:[],attribute_whitelist:[],quote_attribute_when_needed:!1,id_blacklist:[],id_whitelist:[],class_blacklist:[],class_whitelist:[],root_node:null},a.prototype.nthSelectors={child:0,type:1},a.prototype.setOptions=function(a){var b,c,d;null==a&&(a={}),c=[];for(b in a)d=a[b],this.default_options.hasOwnProperty(b)?c.push(this.options[b]=d):c.push(void 0);return c},a.prototype.isElement=function(a){return!(1!==(null!=a?a.nodeType:void 0))},a.prototype.getParents=function(a){var b,c;if(c=[],this.isElement(a))for(b=a;this.isElement(b);)c.push(b),b=b.parentNode;return c},a.prototype.getTagSelector=function(a){return this.sanitizeItem(a.tagName.toLowerCase())},a.prototype.sanitizeItem=function(a){var b;return b=a.split("").map(function(a){return":"===a?"\\"+":".charCodeAt(0).toString(16).toUpperCase()+" ":/[ !"#$%&'()*+,.\/;<=>?@\[\\\]^`{|}~]/.test(a)?"\\"+a:escape(a).replace(/\%/g,"\\")}),b.join("")},a.prototype.sanitizeAttribute=function(a){var b;return this.options.quote_attribute_when_needed?this.quoteAttribute(a):(b=a.split("").map(function(a){return":"===a?"\\"+":".charCodeAt(0).toString(16).toUpperCase()+" ":/[ !"#$%&'()*+,.\/;<=>?@\[\\\]^`{|}~]/.test(a)?"\\"+a:escape(a).replace(/\%/g,"\\")}),b.join(""))},a.prototype.quoteAttribute=function(a){var b,c;return c=!1,b=a.split("").map(function(a){return":"===a?(c=!0,a):"'"===a?(c=!0,"\\"+a):(c=c||escape(a===!a),a)}),c?"'"+b.join("")+"'":b.join("")},a.prototype.getIdSelector=function(a){var b,c,d,e,f;return e=this.options.prefix_tag?this.getTagSelector(a):"",c=a.getAttribute("id"),d=this.options.id_blacklist.concat(["",/\s/,/^\d/]),!c||null==c||""===c||!this.inList(c,this.options.id_whitelist)&&this.inList(c,d)||(f=e+("#"+this.sanitizeItem(c)),b=this.options.root_node||a.ownerDocument,1!==b.querySelectorAll(f).length)?null:f},a.prototype.inList=function(a,b){return b.some(function(b){return"string"==typeof b?b===a:b.test(a)})},a.prototype.itemMatches=function(a,b){return b.find(function(b){return"string"==typeof a?b===a:a.exec(b)})},a.prototype.getClassSelectors=function(a){var b,c,d,e,f,g,h,i,j,k;if(k=[],b=a.getAttribute("class"),null!=b&&(b=b.replace(/\s+/g," "),b=b.replace(/^\s|\s$/g,""),""!==b)){for(c=b.split(/\s+/),j=this.options.class_whitelist,f=0,h=j.length;f<h;f++)e=j[f],d=this.itemMatches(e,c),d&&k.push("."+this.sanitizeItem(d));for(g=0,i=c.length;g<i;g++)e=c[g],this.inList(e,this.options.class_blacklist)||this.inList(e,this.options.class_whitelist)||k.push("."+this.sanitizeItem(e))}return k},a.prototype.getAttributeSelectors=function(a){var b,c,d,e,f,g,h,i,j,k;for(j=[],d=a.attributes,c=function(a){return function(b){return j.push("["+b.nodeName+"="+a.sanitizeAttribute(b.nodeValue)+"]")}}(this),k=this.options.attribute_whitelist,f=0,h=d.length;f<h;f++)b=d[f],this.inList(b.nodeName,k)&&c(b);for(e=this.options.attribute_blacklist.concat(["id","class"]),g=0,i=d.length;g<i;g++)b=d[g],this.inList(b.nodeName,e)||this.inList(b.nodeName,k)||c(b);return j},a.prototype.getNthChildSelector=function(a){return this.getNthSelector(a,this.nthSelectors.child)},a.prototype.getNthTypeSelector=function(a){return this.getNthSelector(a,this.nthSelectors.type)},a.prototype.getNthSelector=function(a,b){var c,d,e,f,g,h,i,j;if(f=a.parentNode,g="",(b===this.nthSelectors.type||this.options.prefix_tag)&&(g=this.getTagSelector(a)),j=b===this.nthSelectors.child?"child":"of-type",null!=f)for(c=0,i=f.childNodes,d=0,e=i.length;d<e;d++)if(h=i[d],this.isElement(h)&&(b===this.nthSelectors.child||this.getTagSelector(h)===g)&&(c++,h===a))return g+":nth-"+j+"("+c+")";return null},a.prototype.testSelector=function(a,b){var c,d,e;return d=!1,null!=b&&""!==b&&(c=this.options.root_node||a.ownerDocument,e=c.querySelectorAll(b),1===e.length&&e[0]===a&&(d=!0)),d},a.prototype.testUniqueness=function(a,b){var c,d;return d=a.parentNode,c=d.querySelectorAll(b),1===c.length&&c[0]===a},a.prototype.testCombinations=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;if(null==c&&(c=this.getTagSelector(a)),!this.options.prefix_tag){for(m=this.getCombinations(b),e=0,g=m.length;e<g;e++)if(d=m[e],this.testSelector(a,d))return d;for(n=this.getCombinations(b),f=0,h=n.length;f<h;f++)if(d=n[f],this.testUniqueness(a,d))return d}for(o=this.getCombinations(b).map(function(a){return c+a}),k=0,i=o.length;k<i;k++)if(d=o[k],this.testSelector(a,d))return d;for(p=this.getCombinations(b).map(function(a){return c+a}),l=0,j=p.length;l<j;l++)if(d=p[l],this.testUniqueness(a,d))return d;return null},a.prototype.getUniqueSelector=function(a){var b,c,d,e,f,g,h;for(h=this.getTagSelector(a),d=this.options.selectors,b=0,c=d.length;b<c;b++){switch(f=d[b]){case"id":e=this.getIdSelector(a);break;case"tag":h&&this.testUniqueness(a,h)&&(e=h);break;case"class":g=this.getClassSelectors(a),null!=g&&0!==g.length&&(e=this.testCombinations(a,g,h));break;case"attribute":g=this.getAttributeSelectors(a),null!=g&&0!==g.length&&(e=this.testCombinations(a,g,h));break;case"nthchild":e=this.getNthChildSelector(a);break;case"nthtype":e=this.getNthTypeSelector(a)}if(e)return e}return"*"},a.prototype.getSelector=function(a){var b,c,d,e,f,g,h;for(h=[],e=this.getParents(a),c=0,d=e.length;c<d;c++)if(b=e[c],g=this.getUniqueSelector(b),null!=g&&(h.unshift(g),f=h.join(" > "),this.testSelector(a,f)))return f;return null},a.prototype.getCombinations=function(a){var b,c,d,e,f,g,h;for(null==a&&(a=[]),h=[[]],b=d=0,f=a.length-1;0<=f?d<=f:d>=f;b=0<=f?++d:--d)for(c=e=0,g=h.length-1;0<=g?e<=g:e>=g;c=0<=g?++e:--e)h.push(h[c].concat(a[b]));return h.shift(),h=h.sort(function(a,b){return a.length-b.length}),h=h.map(function(a){return a.join("")})},a}(),("undefined"!=typeof define&&null!==define?define.amd:void 0)?define([],function(){return a}):(b="undefined"!=typeof exports&&null!==exports?exports:this,b.CssSelectorGenerator=a)}).call(this);